/*++

Copyright (C) 2019 Calculation developers

All rights reserved.

This file has been generated by the Automatic Component Toolkit (ACT) version 1.7.0-develop.

Abstract: This is an autogenerated Java file in order to allow an easy
 use of Calculation library

Interface version: 1.0.0

*/

package calculation;

import com.sun.jna.Library;
import com.sun.jna.Memory;
import com.sun.jna.Native;
import com.sun.jna.Pointer;
import java.lang.ref.Cleaner;

import numbers.*;

import java.nio.charset.StandardCharsets;
import java.util.Arrays;
import java.util.List;

public class Base {

	protected static final Cleaner mCleaner = Cleaner.create();

	protected Pointer mHandle;

	protected CalculationWrapper mWrapper;

	public Base(CalculationWrapper wrapper, Pointer handle) {
		mHandle = handle;
		mWrapper = wrapper;
		mCleaner.register(this, new InstanceReleaser(this));
	}

	public Pointer getHandle() {
		return mHandle;
	}
	
	protected static class InstanceReleaser implements Runnable{
	
		protected Pointer mHandle;
		
		protected CalculationWrapper mWrapper;
		
		protected InstanceReleaser(Base instance) {
			mHandle = instance.mHandle;
			mWrapper = instance.mWrapper;
		}
		
		@Override
		public void run() {
			try {
				mWrapper.checkError(null, mWrapper.calculation_releaseinstance.invokeInt(new java.lang.Object[]{mHandle}));
			} catch (CalculationException e) {
				e.printStackTrace();
			}
		}
	}
	/**
	 * Get Class Type Id
	 *
	 * @return Class type as a 64 bits integer
	 * @throws CalculationException
	 */
	public long classTypeId() throws CalculationException {
		Pointer bufferClassTypeId = new Memory(8);
		mWrapper.checkError(this, mWrapper.calculation_base_classtypeid.invokeInt(new java.lang.Object[]{mHandle, bufferClassTypeId}));
		return bufferClassTypeId.getLong(0);
	}


}

