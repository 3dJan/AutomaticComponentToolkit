/*++

Copyright (C) 2021 ADSK

All rights reserved.

This file has been generated by the Automatic Component Toolkit (ACT) version 1.7.0-develop.

Abstract: This is an autogenerated CSharp application that demonstrates the
 usage of the CSharp bindings of RTTI

Interface version: 1.0.0

*/


using System;
namespace RTTI_Example
{
	class RTTI_Example
	{
		static void Main()
		{
			try
			{
				UInt32 nMajor, nMinor, nMicro;
				RTTI.Wrapper.GetVersion(out nMajor, out nMinor, out nMicro);
				string versionString = string.Format("RTTI.version = {0}.{1}.{2}", nMajor, nMinor, nMicro);
				Console.WriteLine(versionString);

				RTTI.CZoo Zoo = RTTI.Wrapper.CreateZoo();
				RTTI.CAnimalIterator Iterator = Zoo.Iterator();

				RTTI.CAnimal Animal;

				// Animal name: Gerald Giraffe
				Animal = Iterator.GetNextAnimal();
				if (!(Animal.GetHandle() != IntPtr.Zero)) throw new Exception("Wrong data");
				if (!(Animal.Name().Equals("Gerald Giraffe"))) throw new Exception("Wrong data");
				if (!(Animal is RTTI.CGiraffe)) throw new Exception("Wrong data");

				// Animal name: Timmy Tiger
				Animal = Iterator.GetNextAnimal();
				if (!(Animal.GetHandle() != IntPtr.Zero)) throw new Exception("Wrong data");
				if (!(Animal.Name().Equals("Timmy Tiger"))) throw new Exception("Wrong data");
				if (!(Animal is RTTI.CTiger)) throw new Exception("Wrong data");
				(Animal as RTTI.CTiger).Roar();

				// Animal name: Tony Tiger
				Animal = Iterator.GetNextAnimal();
				if (!(Animal.GetHandle() != IntPtr.Zero)) throw new Exception("Wrong data");
				if (!(Animal.Name().Equals("Tony Tiger"))) throw new Exception("Wrong data");
				if (!(Animal is RTTI.CTiger)) throw new Exception("Wrong data");
				(Animal as RTTI.CTiger).Roar();

				// Animal name: Sebastian Snake
				Animal = Iterator.GetNextAnimal();
				if (!(Animal.GetHandle() != IntPtr.Zero)) throw new Exception("Wrong data");
				if (!(Animal.Name().Equals("Sebastian Snake"))) throw new Exception("Wrong data");
				if (!(Animal is RTTI.CSnake)) throw new Exception("Wrong data");

				// Animal name: Tobias Turtle
				Animal = Iterator.GetNextAnimal();
				if (!(Animal.GetHandle() != IntPtr.Zero)) throw new Exception("Wrong data");
				if (!(Animal.Name().Equals("Tobias Turtle"))) throw new Exception("Wrong data");
				if (!(Animal is RTTI.CTurtle)) throw new Exception("Wrong data");

				// Animal name: Theo Turtle
				Animal = Iterator.GetNextAnimal();
				if (!(Animal.GetHandle() != IntPtr.Zero)) throw new Exception("Wrong data");
				if (!(Animal.Name().Equals("Theo Turtle"))) throw new Exception("Wrong data");
				if (!(Animal is RTTI.CTurtle)) throw new Exception("Wrong data");

				// Animal name: Tomás Turtle
				Animal = Iterator.GetNextAnimal();
				if (!(Animal.GetHandle() != IntPtr.Zero)) throw new Exception("Wrong data");
				if (!(Animal.Name().Equals("Tomás Turtle"))) throw new Exception("Wrong data");
				if (!(Animal is RTTI.CTurtle)) throw new Exception("Wrong data");

				// Animal name: Slytherin Snake
				Animal = Iterator.GetNextAnimal();
				if (!(Animal.GetHandle() != IntPtr.Zero)) throw new Exception("Wrong data");
				if (!(Animal.Name().Equals("Slytherin Snake"))) throw new Exception("Wrong data");
				if (!(Animal is RTTI.CSnake)) throw new Exception("Wrong data");

				// Animal name: Travis Tiger
				Animal = Iterator.GetNextAnimal();
				if (!(Animal.GetHandle() != IntPtr.Zero)) throw new Exception("Wrong data");
				if (!(Animal.Name().Equals("Travis Tiger"))) throw new Exception("Wrong data");
				if (!(Animal is RTTI.CTiger)) throw new Exception("Wrong data");
				(Animal as RTTI.CTiger).Roar();

				Console.WriteLine("Trace - 4");
				// Animal name: Gary Giraffe
				Animal = Iterator.GetNextAnimal();
				if (!(Animal.GetHandle() != IntPtr.Zero)) throw new Exception("Wrong data");
				if (!(Animal.Name().Equals("Gary Giraffe"))) throw new Exception("Wrong data");
				if (!(Animal is RTTI.CGiraffe)) throw new Exception("Wrong data");
				
				Animal = Iterator.GetNextAnimal();
				if (!(Animal.GetHandle() == IntPtr.Zero)) throw new Exception("Wrong data");
			}
			catch (Exception e)
			{
				Console.WriteLine("Exception: \"" + e.Message + "\"");
				System.Environment.Exit(1);
			}
		}
	}
}

